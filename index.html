<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Mental Educacional</title>
    <!-- Carregando Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carregando biblioteca de ícones (Lucide) -->
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide.min.js"></script>
    
    <style>
        /* Estilos personalizados */
        body {
            font-family: 'Inter', sans-serif;
        }
        
        /* --- Estilos do Novo Mapa Mental --- */

        /* O nó raiz (o primeiro) não deve ter linhas de conexão */
        .mindmap-root {
            padding-left: 0;
        }

        /* Cada nó que não é o raiz */
        .mindmap-node {
            position: relative;
            /* Espaço à esquerda para a linha vertical e o card */
            padding-left: 48px; 
            margin-top: 12px;
        }
        
        /* O card que contém o tópico */
        .mindmap-card {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background-color: white;
            border: 1px solid #e2e8f0; /* gray-200 */
            border-radius: 8px;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease-in-out;
        }
        .mindmap-card:hover {
            border-color: #3b82f6; /* blue-500 */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }

        /* Linha horizontal (do card para a linha vertical principal) */
        .mindmap-card::before {
            content: '';
            position: absolute;
            top: 50%; /* Centraliza verticalmente */
            left: -20px; /* Puxa para a esquerda até a linha vertical */
            width: 20px; /* Comprimento da linha */
            height: 2px;
            background-color: #94a3b8; /* gray-400 */
            transform: translateY(-50%);
        }

        /* O primeiro nó (raiz) não precisa da linha horizontal */
        .mindmap-root > .mindmap-card::before {
            display: none;
        }

        /* Contêiner para os filhos de um nó */
        .mindmap-children {
            position: relative;
            margin-top: 12px;
            padding-left: 28px; /* Alinha os filhos com o pai */
        }

        /* Linha vertical principal (a "espinha dorsal") */
        .mindmap-children::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0; /* Alinhada à esquerda do contêiner dos filhos */
            width: 2px;
            background-color: #94a3b8; /* gray-400 */
        }

        /* Ajusta a linha vertical do último filho para não passar dele */
        .mindmap-node:last-child > .mindmap-children::before {
            /* Se o último filho também tem filhos, deixa a linha normal */
            /* Se o último filho NÃO tem filhos, a linha não é necessária */
        }
        
        /* Remove a linha vertical se não houver filhos */
        .mindmap-node.no-children > .mindmap-children {
            display: none;
        }

    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex h-screen overflow-hidden">

    <!-- Sidebar de Navegação (Menu Lateral) -->
    <!-- 
      Estado Padrão (Mobile): Oculto (-translate-x-full)
      Estado Desktop (md:): Visível (md:translate-x-0)
    -->
    <aside id="sidebar" class="w-80 bg-gray-900 text-white p-6 overflow-y-auto shadow-lg h-full fixed top-0 left-0 z-30
                           transform -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out">
        <h1 class="text-2xl font-bold mb-6 text-white">Disciplinas</h1>
        <nav id="sidebar-nav">
            <!-- O conteúdo da navegação será injetado pelo JavaScript -->
        </nav>
    </aside>

    <!-- Overlay para fechar o menu no mobile -->
    <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden md:hidden" onclick="toggleMenu()"></div>

    <!-- Conteúdo Principal (com Topbar) -->
    <div class="flex-1 flex flex-col h-screen">
        
        <!-- Topbar -->
        <header class="bg-white shadow-md p-4 flex items-center justify-between z-10 md:ml-80">
            <!-- Botão Hamburger (Apenas Mobile) -->
            <button id="menu-toggle" class="md:hidden text-gray-700" onclick="toggleMenu()">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
            <h2 class="text-xl font-semibold text-gray-700">MindMap Educacional</h2>
            <div class="w-6"></div> <!-- Espaçador -->
        </header>

        <!-- Área de Conteúdo Scrollável -->
        <main class="flex-1 p-4 md:p-8 overflow-y-auto bg-gray-50 md:ml-80">
            <div id="content-area" class="bg-transparent min-h-full">
                <h2 id="content-title" class="text-3xl font-bold text-gray-800 mb-6">
                    Selecione um Subtema
                </h2>
                <div id="mindmap-container">
                    <p class="text-gray-500">Escolha uma disciplina, tema e subtema no menu ao lado para exibir o mapa mental.</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        // --- BANCO DE DADOS SIMULADO ---
        const database = {
            "Direito Penal": {
                "Teoria do Crime": {
                    "Conceito de Crime": {
                        title: "Conceito de Crime",
                        children: [
                            { title: "Conceito Material" },
                            { title: "Conceito Formal" },
                            { 
                                title: "Conceito Analítico (Tripartido)",
                                children: [
                                    { title: "Fato Típico" },
                                    { title: "Ilicitude (Antijuridicidade)" },
                                    { title: "Culpabilidade" }
                                ]
                            }
                        ]
                    },
                    "Fato Típico": {
                        title: "Fato Típico e seus Elementos",
                        children: [
                            { title: "Conduta (Ação ou Omissão)" },
                            { title: "Resultado Naturalístico" },
                            { title: "Nexo de Causalidade" },
                            { title: "Tipicidade" }
                        ]
                    }
                },
                "Crimes contra a Vida": {
                    "Homicídio": {
                        title: "Homicídio (Art. 121 CP)",
                        children: [
                            { title: "Homicídio Simples (caput)" },
                            {
                                title: "Homicídio Privilegiado (§ 1º)",
                                children: [
                                    { title: "Relevante valor social" },
                                    { title: "Relevante valor moral" },
                                    { title: "Domínio de violenta emoção" }
                                ]
                            },
                            {
                                title: "Homicídio Qualificado (§ 2º)",
                                children: [
                                    { title: "Motivo Torpe" },
                                    { title: "Motivo Fútil" },
                                    { title: "Feminicídio" }
                                ]
                            },
                        ]
                    },
                    "Infanticídio": {
                        title: "Infanticídio (Art. 123 CP)",
                        children: [
                            { title: "Sujeito Ativo (Mãe)" },
                            { title: "Sujeito Passivo (Próprio filho)" },
                            { title: "Elemento Psicofisiológico (Estado puerperal)" }
                        ]
                    }
                }
            },
            "Filosofia": {
                "Filósofos Pré-Socráticos": {
                    "Escola Jônica": {
                        title: "Escola Jônica (Physis)",
                        children: [
                            { title: "Tales de Mileto (Água)" },
                            { title: "Anaximandro (Apeíron)" },
                            { title: "Anaxímenes (Ar)" },
                            { title: "Heráclito (Fogo - Devir)" }
                        ]
                    },
                     "Escola Italiana": {
                        title: "Escola Italiana",
                        children: [
                            { title: "Pitágoras (Números)" },
                            { 
                                title: "Escola Eleática",
                                children: [
                                    { title: "Parmênides (O Ser é)" },
                                    { title: "Zenão de Eleia (Paradoxos)" }
                                ]
                            }
                        ]
                    }
                },
                "Período Clássico": {
                    "Sofistas": {
                        title: "Sofistas",
                        children: [
                            { title: "Protágoras (O homem é a medida)" },
                            { title: "Górgias (Ceticismo)" }
                        ]
                    },
                    "Tríade de Atenas": {
                        title: "A Tríade de Atenas",
                        children: [
                            { 
                                title: "Sócrates",
                                children: [
                                    { title: "Método Socrático (Maiêutica)" },
                                    { title: "Ironia" },
                                    { title: "Conhece-te a ti mesmo" }
                                ]
                            },
                            { 
                                title: "Platão",
                                children: [
                                    { title: "Teoria das Ideias (Mundo Sensível vs. Inteligível)" },
                                    { title: "Alegoria da Caverna" },
                                    { title: "A República (Sofocracia)" }
                                ]
                            },
                             { 
                                title: "Aristóteles",
                                children: [
                                    { title: "Metafísica (Ato e Potência)" },
                                    { title: "Ética a Nicômaco (Justo Meio)" },
                                    { title: "Lógica (Organon)" },
                                    { title: "Política (Zoon Politikon)" }
                                ]
                            },
                        ]
                    }
                }
            }
        };

        // --- INICIALIZAÇÃO ---
        document.addEventListener('DOMContentLoaded', () => {
            renderSidebar();
            // Inicializa os ícones do Lucide
            lucide.createIcons();
        });

        // --- FUNÇÕES DE UI (MENU) ---
        function toggleMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            sidebar.classList.toggle('-translate-x-full');
            overlay.classList.toggle('hidden');
        }

        // --- FUNÇÕES DA SIDEBAR ---
        function renderSidebar() {
            const nav = document.getElementById('sidebar-nav');
            nav.innerHTML = ''; // Limpa a navegação

            for (const disciplina in database) {
                // Nível 1: Disciplina
                const discContainer = document.createElement('div');
                discContainer.className = 'mb-4';
                
                const discButton = document.createElement('button');
                discButton.className = 'flex items-center justify-between w-full text-lg font-semibold text-left text-blue-300 hover:text-white focus:outline-none py-2';
                discButton.innerHTML = `
                    <span>${disciplina}</span>
                    <i data-lucide="chevron-down" class="w-5 h-5 transition-transform duration-200"></i>
                `;
                
                const temasList = document.createElement('ul');
                temasList.className = 'ml-4 mt-2 hidden space-y-2 border-l border-gray-700'; // Começa escondido

                for (const tema in database[disciplina]) {
                    // Nível 2: Tema
                    const temaItem = document.createElement('li');
                    temaItem.className = "pl-4";
                    
                    const temaButton = document.createElement('button');
                    temaButton.className = 'flex items-center justify-between w-full text-md font-medium text-left text-gray-300 hover:text-white focus:outline-none py-1';
                    temaButton.innerHTML = `
                        <span>${tema}</span>
                        <i data-lucide="chevron-down" class="w-4 h-4 transition-transform duration-200"></i>
                    `;
                    
                    const subtemasList = document.createElement('ul');
                    subtemasList.className = 'ml-4 mt-2 hidden space-y-1 border-l border-gray-600'; // Começa escondido

                    for (const subtema in database[disciplina][tema]) {
                        // Nível 3: Subtema
                        const subtemaItem = document.createElement('li');
                        subtemaItem.className = "pl-4";

                        const subtemaLink = document.createElement('a');
                        subtemaLink.href = '#';
                        subtemaLink.textContent = subtema;
                        subtemaLink.className = 'block text-gray-400 hover:text-white py-1 transition-colors';
                        
                        subtemaLink.dataset.disciplina = disciplina;
                        subtemaLink.dataset.tema = tema;
                        subtemaLink.dataset.subtema = subtema;

                        subtemaLink.addEventListener('click', (e) => {
                            e.preventDefault();
                            
                            // Remove o 'active' de todos os links
                            document.querySelectorAll('#sidebar-nav a').forEach(a => a.classList.remove('text-white', 'font-bold'));
                            // Adiciona o 'active' no link clicado
                            e.target.classList.add('text-white', 'font-bold');

                            const data = e.target.dataset;
                            const mapData = database[data.disciplina][data.tema][data.subtema];
                            renderMindMap(mapData, subtema);
                            
                            // Fecha o menu se estiver no modo mobile
                            if (window.innerWidth < 768) { // 768px é o breakpoint 'md' do Tailwind
                                toggleMenu();
                            }
                        });
                        
                        subtemaItem.appendChild(subtemaLink);
                        subtemasList.appendChild(subtemaItem);
                    }

                    temaButton.addEventListener('click', (e) => {
                        e.stopPropagation(); // Evita que o clique feche a disciplina
                        subtemasList.classList.toggle('hidden');
                        temaButton.querySelector('i').classList.toggle('rotate-180');
                    });

                    temaItem.appendChild(temaButton);
                    temaItem.appendChild(subtemasList);
                    temasList.appendChild(temaItem);
                }

                discButton.addEventListener('click', () => {
                    temasList.classList.toggle('hidden');
                    discButton.querySelector('i').classList.toggle('rotate-180');
                });
                
                discContainer.appendChild(discButton);
                discContainer.appendChild(temasList);
                nav.appendChild(discContainer);
            }
            lucide.createIcons(); // Cria os ícones do acordeão
        }

        // --- FUNÇÕES DO MAPA MENTAL ---
        function renderMindMap(mapData, title) {
            const container = document.getElementById('mindmap-container');
            const titleEl = document.getElementById('content-title');
            
            titleEl.textContent = title;
            container.innerHTML = ''; // Limpa o mapa anterior

            if (mapData && mapData.title) {
                // Cria o nó raiz (nível 0)
                const rootNode = createMindMapNode(mapData, true); // true = isRoot
                container.appendChild(rootNode);
            } else {
                container.innerHTML = '<p class="text-gray-500">Não foi possível carregar este mapa mental.</p>';
            }
            
            // Recria os ícones do Lucide
            lucide.createIcons();
        }

        /**
         * Cria recursivamente os nós do mapa mental
         * @param {object} nodeData - Os dados do nó atual
         * @param {boolean} isRoot - Se este é o nó raiz
         */
        function createMindMapNode(nodeData, isRoot = false) {
            const node = document.createElement('div');
            const hasChildren = nodeData.children && nodeData.children.length > 0;
            
            node.className = isRoot ? 'mindmap-root' : 'mindmap-node';
            if (!hasChildren && !isRoot) {
                node.classList.add('no-children');
            }

            // O Card do Tópico
            const card = document.createElement('div');
            card.className = 'mindmap-card';
            
            // Conteúdo Esquerdo (Ícone + Texto)
            const leftContent = document.createElement('div');
            leftContent.className = 'flex items-center';
            
            const icon = document.createElement('i');
            // Ícone de "livro" para o raiz, "arquivo" para os filhos
            icon.setAttribute('data-lucide', isRoot ? 'book-open' : 'file-text');
            icon.className = 'w-5 h-5 text-blue-500 mr-3';
            
            const text = document.createElement('span');
            text.textContent = nodeData.title;
            text.className = isRoot ? 'text-xl font-semibold text-gray-800' : 'text-lg text-gray-700';
            
            leftContent.appendChild(icon);
            leftContent.appendChild(text);

            // Conteúdo Direito (Botão Google IA)
            const searchButton = document.createElement('button');
            searchButton.className = 'ml-4 text-gray-500 hover:text-blue-600 p-2 rounded-full hover:bg-blue-100';
            searchButton.title = `Pesquisar "${nodeData.title}" no Google (Modo IA)`;
            // Ícone "BrainCircuit" para IA
            searchButton.innerHTML = '<i data-lucide="brain-circuit" class="w-5 h-5"></i>';
            searchButton.onclick = () => searchOnGoogle(nodeData.title);
            
            card.appendChild(leftContent);
            card.appendChild(searchButton);
            node.appendChild(card);

            // Processa os filhos recursivamente
            if (hasChildren) {
                const childrenContainer = document.createElement('div');
                childrenContainer.className = 'mindmap-children';
                
                nodeData.children.forEach(childData => {
                    const childNode = createMindMapNode(childData, false);
                    childrenContainer.appendChild(childNode);
                });
                
                node.appendChild(childrenContainer);
            }
            
            return node;
        }
        
        // --- FUNÇÕES AUXILIARES ---
        function searchOnGoogle(topic) {
            // Codifica o tópico para ser usado em uma URL
            const query = encodeURIComponent(topic);
            // O "modo IA" do Google (AI Overviews) é ativado automaticamente
            // pela pesquisa padrão.
            const url = `https://www.google.com/search?q=${query}`;
            window.open(url, '_blank');
        }

    </script>
</body>
</html>

